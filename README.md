# parser-vacancies-2.0
___
## Описание проекта
Этот проект предназначен для получения данных о работодателях и их вакансиях с сайта HH.ru с использованием публичного API и их последующего хранения в базе данных PostgreSQL. Проект включает класс DBManager для работы с данными в БД и предоставляет методы для получения полезной аналитики по вакансиям.
___
## Основные шаги проекта
1. Получение данных с HH.ru API:

 * Используйте публичный API HH.ru и библиотеку requests для получения данных о работодателях и вакансиях.
 * Выберите не менее 10 интересных компаний для сбора данных по API.

2. Проектирование базы данных:

 * Спроектируйте таблицы в базе данных PostgreSQL для хранения данных о работодателях и вакансиях.
 * Таблицы включают информацию о компаниях и связанных с ними вакансиях.
3. Заполнение базы данных:

 * Реализуйте код для заполнения спроектированных таблиц данными, полученными с API HH.ru.
4. Создание класса DBManager:

 * Класс DBManager используется для взаимодействия с базой данных PostgreSQL и предоставляет несколько методов для работы с данными.
___

## Установка
1. Клонируйте репозиторий:

```bash
git clone https://github.com/yourusername/hh-vacancies-project.git
```

2. Установите необходимые зависимости из pyproject.toml
3. Настройте PostgreSQL базу данных:

 * Создайте базу данных и пользователя в PostgreSQL.
 * Обновите параметры подключения в коде DBManager (например, dbname, user, password, host, port).
___

## Структура базы данных
* **Таблица _companies_**:

  * company_id: integer, первичный ключ.
  * company_name: varchar(50), название компании.
  * company_url: text, ссылка на сайт компании.
* **Таблица _vacancies_:**

  * vacancy_id: text, первичный ключ.
  * company_id: integer, внешний ключ, ссылающийся на companies.
  * vacancy_name: varchar(100), название вакансии.
  * requirement: varchar(255), требования к кандидату.
  * salary_min: integer, минимальная зарплата.
  * salary_max: integer, максимальная зарплата.
  * currency: varchar(50), валюта зарплаты.
  * vacancy_url: text, ссылка на вакансию.

___

## Зависимости
* Python 3.x
* PostgreSQL
* Библиотеки: requests, psycopg2

---

## Использование программы

### Шаги для запуска программы

1. **Сбор данных с HH.ru**:
    - Программа автоматически собирает данные о компаниях и вакансиях с сайта HH.ru через публичный API.
    - Затем данные сохраняются в базе данных PostgreSQL.

2. **Запуск программы**:
    - Программа предложит вам выбрать один из доступных запросов, чтобы получить информацию из базы данных.
    - Взаимодействие с пользователем осуществляется через консоль.

### Запуск основной функции

Для запуска программы и работы с базой данных выполните команду:

```bash
python main.py
```

### Пример работы с программой

После запуска программы, вам будет предложено выбрать один из следующих запросов:

```
Введите ваш запрос:
1 - Список всех компаний и количество вакансий у каждой компании
2 - Список всех вакансий с указанием названия компании, названия вакансии, зарплаты и ссылки на вакансию
3 - Средняя зарплата по вакансиям
4 - Список всех вакансий, у которых зарплата выше средней по всем вакансиям
5 - Список всех вакансий, в названии которых содержатся ключевые слова
```

#### Запросы

- **Запрос 1: Список всех компаний и количество вакансий у каждой компании**
    - Введите `1`, чтобы получить список всех компаний и количество вакансий у каждой из них.

    **Пример вывода**:
    ```
    Компании и количество доступных вакансий:
    Компания A: 10
    Компания B: 5
    ```

- **Запрос 2: Список всех вакансий с указанием названия компании, названия вакансии, зарплаты и ссылки на вакансию**
    - Введите `2`, чтобы получить полный список всех вакансий с деталями.

    **Пример вывода**:
    ```
    Все вакансии:
    Компания: Компания A, Вакансия: Программист, Зарплата: 100000-150000, Ссылка на вакансию: http://example.com
    ```

- **Запрос 3: Средняя зарплата по вакансиям**
    - Введите `3`, чтобы узнать среднюю зарплату по всем вакансиям.

    **Пример вывода**:
    ```
    Средняя зарплата по всем вакансиям: 120000
    ```

- **Запрос 4: Список всех вакансий, у которых зарплата выше средней по всем вакансиям**
    - Введите `4`, чтобы получить список вакансий с зарплатой выше средней.

    **Пример вывода**:
    ```
    Вакансии с зарплатой выше средней:
    Компания: Компания A, Вакансия: Старший разработчик, Зарплата: 150000-200000, Ссылка на вакансию: http://example.com
    ```

- **Запрос 5: Список всех вакансий, в названии которых содержатся ключевые слова**
    - Введите `5`, затем введите ключевое слово, чтобы найти вакансии с этим словом в названии.

    **Пример вывода**:
    ```
    Введите ключевое слово для поиска вакансий: python
    Все вакансии с ключевым словом 'python':
    Компания: Компания B, Вакансия: Python Developer, Зарплата: 120000-160000, Ссылка на вакансию: http://example.com
    ```

Если вы введете некорректный ввод, программа выведет сообщение об ошибке.

### Завершение работы

После выполнения запроса и получения результата, программа автоматически закрывает соединение с базой данных и завершает работу.
